:root {
    --cw-bg: #ffffff;
    --cw-border: #e5eaf1;
    --cw-text: #0b1220;
    --cw-muted: #5b6b86;
    --cw-blue: #1e90ff;
    --cw-blue-deep: #0e5fff;
    --cw-shadow: 0 12px 24px rgba(3, 23, 61, 0.18);
}

/* Floating Action Button */
.cw-fab {
    position: fixed;
    right: 20px;
    bottom: 20px;
    width: 52px;
    height: 52px;
    border-radius: 999px;
    border: none;
    background: linear-gradient(135deg, var(--cw-blue), var(--cw-blue-deep));
    color: #fff;
    display: grid;
    place-items: center;
    box-shadow: var(--cw-shadow);
    cursor: pointer;
    transition: transform .1s ease, box-shadow .2s ease;
    z-index: 9998;
}

.cw-fab:hover {
    transform: translateY(-1px);
}

/* Popup wrapper */
.cw-wrap {
    position: fixed;
    right: 20px;
    bottom: 20px;
    width: 360px;
    max-width: calc(100vw - 24px);
    transform: translateY(16px);
    opacity: 0;
    pointer-events: none;
    transition: transform .2s ease, opacity .2s ease;
    z-index: 9999;
}

.cw-open {
    transform: translateY(0);
    opacity: 1;
    pointer-events: auto;
}

/* Card */
.cw-card {
    background: var(--cw-bg);
    border: 1px solid var(--cw-border);
    border-radius: 14px;
    box-shadow: var(--cw-shadow);
    display: flex;
    flex-direction: column;
    overflow: hidden;
}

/* Header */
.cw-head {
    background: linear-gradient(135deg, #e9f3ff, #f5f9ff);
    border-bottom: 1px solid var(--cw-border);
    padding: 10px 12px;
    display: flex;
    align-items: center;
    justify-content: space-between;
}

.cw-brand {
    display: inline-flex;
    align-items: center;
    gap: 8px;
}

.cw-title {
    font-weight: 700;
    color: #093a8b;
    letter-spacing: .2px;
}

.cw-x {
    border: none;
    background: transparent;
    font-size: 22px;
    line-height: 1;
    color: var(--cw-muted);
    cursor: pointer;
}

/* Body */
.cw-body {
    display: flex;
    flex-direction: column;
    gap: 10px;
    padding: 12px;
    max-height: 60vh;
}

.cw-stream {
    overflow: auto;
    padding-right: 4px;
    display: flex;
    flex-direction: column;
    gap: 8px;
}

/* Messages */
.cw-msg {
    display: flex;
}

.cw-user {
    justify-content: flex-end;
}

.cw-assistant {
    justify-content: flex-start;
}

.cw-bubble {
    max-width: 80%;
    padding: 10px 12px;
    border-radius: 12px;
    line-height: 1.35;
    font-size: 14px;
    border: 1px solid var(--cw-border);
    color: var(--cw-text);
    background: #fafcff;
}

.cw-user .cw-bubble {
    background: linear-gradient(135deg, var(--cw-blue), var(--cw-blue-deep));
    color: #fff;
    border-color: transparent;
}

/* Typing dots */
.cw-typing {
    display: inline-flex;
    align-items: center;
    gap: 4px;
    background: #edf4ff;
    border-color: #dbe8ff;
}

.cw-dot {
    width: 6px;
    height: 6px;
    border-radius: 50%;
    background: var(--cw-blue);
    animation: cw-blink 1.2s infinite ease-in-out;
}

.cw-dot:nth-child(2) {
    animation-delay: .15s;
}

.cw-dot:nth-child(3) {
    animation-delay: .3s;
}

@keyframes cw-blink {

    0%,
    80%,
    100% {
        opacity: .2
    }

    40% {
        opacity: 1
    }
}

/* Samples */
.cw-samples {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    margin-top: 2px;
}

.cw-chip {
    font-size: 12px;
    border: 1px solid #cfe2ff;
    color: #0e5fff;
    background: #f2f7ff;
    border-radius: 999px;
    padding: 6px 10px;
    cursor: pointer;
}

.cw-chip:hover {
    background: #e7f1ff;
}

/* Input row */
.cw-inputrow {
    display: flex;
    gap: 8px;
    padding: 12px;
    border-top: 1px solid var(--cw-border);
}

.cw-input {
    flex: 1;
    height: 40px;
    border: 1px solid var(--cw-border);
    border-radius: 10px;
    padding: 0 12px;
    outline: none;
}

.cw-input:focus {
    border-color: #a8c8ff;
    box-shadow: 0 0 0 3px #e6f0ff;
}

.cw-send {
    height: 40px;
    padding: 0 14px;
    border-radius: 10px;
    border: none;
    color: #fff;
    background: linear-gradient(135deg, var(--cw-blue), var(--cw-blue-deep));
    cursor: pointer;
}

.cw-send:disabled {
    opacity: .5;
    cursor: not-allowed;
}

/* Mobile tweaks */
@media (max-width: 480px) {
    .cw-wrap {
        right: 12px;
        left: 12px;
        width: auto;
    }

    .cw-body {
        max-height: 65vh;
    }
}

/* Markdown inside assistant bubbles */
.cw-assistant .cw-bubble {
    background: #fafcff;
}

.cw-bubble h1,
.cw-bubble h2,
.cw-bubble h3 {
    margin: 0.4em 0 0.3em;
    line-height: 1.2;
    color: #0b2a6f;
}

.cw-bubble h1 {
    font-size: 1.10rem;
}

.cw-bubble h2 {
    font-size: 1.02rem;
}

.cw-bubble h3 {
    font-size: 0.98rem;
}

.cw-bubble p {
    margin: 0.35em 0;
}

.cw-bubble strong {
    font-weight: 700;
}

.cw-bubble em {
    font-style: italic;
}

.cw-bubble ul,
.cw-bubble ol {
    padding-left: 1.1em;
    margin: 0.35em 0;
}

.cw-bubble li {
    margin: 0.2em 0;
}

.cw-bubble a {
    color: #0e5fff;
    text-decoration: none;
    border-bottom: 1px dashed #bcd3ff;
}

.cw-bubble a:hover {
    text-decoration: underline;
}

.cw-bubble code {
    font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;
    font-size: 0.86em;
    background: #f3f6ff;
    border: 1px solid #e0e8ff;
    border-radius: 6px;
    padding: 0.1em 0.35em;
}

.cw-bubble pre {
    background: #f3f6ff;
    border: 1px solid #e0e8ff;
    border-radius: 8px;
    padding: 10px;
    overflow: auto;
    margin: 0.5em 0;
}

.cw-bubble table {
    border-collapse: collapse;
    margin: 0.4em 0;
    width: 100%;
}

.cw-bubble th,
.cw-bubble td {
    border: 1px solid #e0e8ff;
    padding: 6px 8px;
    text-align: left;
}

.cw-bubble th {
    background: #edf4ff;
    font-weight: 600;
}